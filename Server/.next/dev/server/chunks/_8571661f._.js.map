{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/monalisasabina/AI_CODE_CLASS/crochet-order-manager/Server/lib/prisma.ts"],"sourcesContent":["import \"dotenv/config\";\nimport { PrismaBetterSqlite3 } from \"@prisma/adapter-better-sqlite3\";\nimport { PrismaClient } from \"../generated/prisma/client\";\n\nconst connectionString = `${process.env.DATABASE_URL}`;\n\nconst adapter = new PrismaBetterSqlite3({ url: connectionString });\nconst prisma = new PrismaClient({ adapter });\n\nexport default prisma ;"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAEA,MAAM,mBAAmB,GAAG,QAAQ,GAAG,CAAC,YAAY,EAAE;AAEtD,MAAM,UAAU,IAAI,mMAAmB,CAAC;IAAE,KAAK;AAAiB;AAChE,MAAM,SAAS,IAAI,+IAAY,CAAC;IAAE;AAAQ;uCAE3B"}},
    {"offset": {"line": 26, "column": 0}, "map": {"version":3,"sources":["file:///home/monalisasabina/AI_CODE_CLASS/crochet-order-manager/Server/app/api/orders/%5Bid%5D/route.js"],"sourcesContent":["import { NextResponse } from 'next/server';\nimport prisma from '../../../../lib/prisma';\n\n\n\n// CORS HEADERS\nconst corsHeaders ={\n    'Access-Control-Allow-Origin': 'http://localhost:4000',\n    'Access-Control-Allow-Methods': 'GET, POST, PATCH, DELETE, OPTIONS',\n    'Access-Control-Allow-Headers': 'Content-Type, Authorization',\n}\n\n//Preflight request handler\nexport async function OPTIONS() {\n    return new NextResponse(null, {\n        status: 200,\n        headers: corsHeaders\n    });\n}\n\n// HELPER FUNCTIONS------------------------------------\n// Get order ID from request URL\nfunction getOrderId(request){\n    const id = request.url.split(\"/\").pop();\n\n    const orderId = Number(id);\n\n    return isNaN(orderId) ? null : orderId;\n}\n\n// Invalid order ID response\nfunction invalidResponse(request){\n    return NextResponse.json(\n        { error: \"Invalid order ID\" },\n        { status: 400, headers: corsHeaders }\n    )\n}\n\n// CRUD METHODS---------------------------------------\n// FETCHING A SINGLE ORDER BY ID\nexport async function GET(request) {\n\n    try{\n    // Extracting order ID from the URL parameters\n    const orderId = getOrderId(request);\n    \n    // Validating order ID\n    if (!orderId) return invalidResponse();\n    \n    // Fetching the order by ID from the database\n    const order = await prisma.order.findUnique({\n        where: { id: Number(orderId) },\n    });\n\n    if (!order) {\n        return NextResponse.json(\n            { error: 'Order not found' },\n            { status: 404, headers: corsHeaders }\n        );\n    }\n\n    // Returning response \n    return NextResponse.json(order, { status: 200, headers: corsHeaders });\n    } catch (error) {\n        console.error('Error fetching order by ID:', error);\n        return NextResponse.json({ error: 'Failed to fetch order' }, { status: 500, headers: corsHeaders });\n    }\n\n}\n\n\n// UPDATE AN EXISTING ORDER CREDENTIALS\nexport async function PATCH(request) {\n    try {\n        // Extracting client ID from the URL parameters\n        const id = getOrderId(request);\n        console.log('Order ID to update:', id);\n\n        // Extracting client data from the request body\n        const body = await request.json();\n\n        const { title, imageUrl, endDate, clientId, isCompleted } = body;\n\n        const updatedOrder = await prisma.order.update({\n\n            // Number() converts string to integer\n            where: { id: Number(id)},\n\n            // only updates provided field\n            data: { title, imageUrl, endDate, clientId, isCompleted },  \n        })\n                \n        console.log('Updated order:', updatedOrder);\n\n        return NextResponse.json(updatedOrder, { status: 200, headers: corsHeaders });\n        } catch (error) {\n        console.error('Error updating order:', error);\n        return NextResponse.json({ error: 'Failed to update order' }, { status: 500, headers: corsHeaders });\n    }\n}\n\n// DELETE AN ORDER BY ID\nexport async function DELETE(request) {\n    try {\n        const orderId = getOrderId(request);\n\n        // Validating order ID\n        if (!orderId) return invalidResponse();\n\n        const deletedOrder = await prisma.order.delete({\n            where: { id: Number(orderId) },\n        });\n\n        console.log('Deleted order:', deletedOrder);\n\n        return NextResponse.json(deletedOrder, { status: 200, headers: corsHeaders });\n    } catch (error) {\n        console.error('Error deleting order:', error);\n        return NextResponse.json({ error: 'Failed to delete order' }, { status: 500, headers: corsHeaders });\n    }\n}   "],"names":[],"mappings":";;;;;;;;;;AAAA;AACA;;;AAIA,eAAe;AACf,MAAM,cAAa;IACf,+BAA+B;IAC/B,gCAAgC;IAChC,gCAAgC;AACpC;AAGO,eAAe;IAClB,OAAO,IAAI,gJAAY,CAAC,MAAM;QAC1B,QAAQ;QACR,SAAS;IACb;AACJ;AAEA,uDAAuD;AACvD,gCAAgC;AAChC,SAAS,WAAW,OAAO;IACvB,MAAM,KAAK,QAAQ,GAAG,CAAC,KAAK,CAAC,KAAK,GAAG;IAErC,MAAM,UAAU,OAAO;IAEvB,OAAO,MAAM,WAAW,OAAO;AACnC;AAEA,4BAA4B;AAC5B,SAAS,gBAAgB,OAAO;IAC5B,OAAO,gJAAY,CAAC,IAAI,CACpB;QAAE,OAAO;IAAmB,GAC5B;QAAE,QAAQ;QAAK,SAAS;IAAY;AAE5C;AAIO,eAAe,IAAI,OAAO;IAE7B,IAAG;QACH,8CAA8C;QAC9C,MAAM,UAAU,WAAW;QAE3B,sBAAsB;QACtB,IAAI,CAAC,SAAS,OAAO;QAErB,6CAA6C;QAC7C,MAAM,QAAQ,MAAM,0HAAM,CAAC,KAAK,CAAC,UAAU,CAAC;YACxC,OAAO;gBAAE,IAAI,OAAO;YAAS;QACjC;QAEA,IAAI,CAAC,OAAO;YACR,OAAO,gJAAY,CAAC,IAAI,CACpB;gBAAE,OAAO;YAAkB,GAC3B;gBAAE,QAAQ;gBAAK,SAAS;YAAY;QAE5C;QAEA,sBAAsB;QACtB,OAAO,gJAAY,CAAC,IAAI,CAAC,OAAO;YAAE,QAAQ;YAAK,SAAS;QAAY;IACpE,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,+BAA+B;QAC7C,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAwB,GAAG;YAAE,QAAQ;YAAK,SAAS;QAAY;IACrG;AAEJ;AAIO,eAAe,MAAM,OAAO;IAC/B,IAAI;QACA,+CAA+C;QAC/C,MAAM,KAAK,WAAW;QACtB,QAAQ,GAAG,CAAC,uBAAuB;QAEnC,+CAA+C;QAC/C,MAAM,OAAO,MAAM,QAAQ,IAAI;QAE/B,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,OAAO,EAAE,QAAQ,EAAE,WAAW,EAAE,GAAG;QAE5D,MAAM,eAAe,MAAM,0HAAM,CAAC,KAAK,CAAC,MAAM,CAAC;YAE3C,sCAAsC;YACtC,OAAO;gBAAE,IAAI,OAAO;YAAG;YAEvB,8BAA8B;YAC9B,MAAM;gBAAE;gBAAO;gBAAU;gBAAS;gBAAU;YAAY;QAC5D;QAEA,QAAQ,GAAG,CAAC,kBAAkB;QAE9B,OAAO,gJAAY,CAAC,IAAI,CAAC,cAAc;YAAE,QAAQ;YAAK,SAAS;QAAY;IAC3E,EAAE,OAAO,OAAO;QAChB,QAAQ,KAAK,CAAC,yBAAyB;QACvC,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAyB,GAAG;YAAE,QAAQ;YAAK,SAAS;QAAY;IACtG;AACJ;AAGO,eAAe,OAAO,OAAO;IAChC,IAAI;QACA,MAAM,UAAU,WAAW;QAE3B,sBAAsB;QACtB,IAAI,CAAC,SAAS,OAAO;QAErB,MAAM,eAAe,MAAM,0HAAM,CAAC,KAAK,CAAC,MAAM,CAAC;YAC3C,OAAO;gBAAE,IAAI,OAAO;YAAS;QACjC;QAEA,QAAQ,GAAG,CAAC,kBAAkB;QAE9B,OAAO,gJAAY,CAAC,IAAI,CAAC,cAAc;YAAE,QAAQ;YAAK,SAAS;QAAY;IAC/E,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,yBAAyB;QACvC,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAyB,GAAG;YAAE,QAAQ;YAAK,SAAS;QAAY;IACtG;AACJ"}}]
}