{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/monalisasabina/AI_CODE_CLASS/crochet-order-manager/Server/lib/prisma.ts"],"sourcesContent":["import \"dotenv/config\";\nimport { PrismaBetterSqlite3 } from \"@prisma/adapter-better-sqlite3\";\nimport { PrismaClient } from \"../generated/prisma/client\";\n\nconst connectionString = `${process.env.DATABASE_URL}`;\n\nconst adapter = new PrismaBetterSqlite3({ url: connectionString });\nconst prisma = new PrismaClient({ adapter });\n\nexport default prisma ;"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAEA,MAAM,mBAAmB,GAAG,QAAQ,GAAG,CAAC,YAAY,EAAE;AAEtD,MAAM,UAAU,IAAI,mMAAmB,CAAC;IAAE,KAAK;AAAiB;AAChE,MAAM,SAAS,IAAI,+IAAY,CAAC;IAAE;AAAQ;uCAE3B"}},
    {"offset": {"line": 26, "column": 0}, "map": {"version":3,"sources":["file:///home/monalisasabina/AI_CODE_CLASS/crochet-order-manager/Server/app/api/notifications/%5Bid%5D/route.js"],"sourcesContent":["import { NextResponse } from 'next/server';\nimport prisma from '../../../../lib/prisma';\n\n\n// HELPER FUNCTIONS------------------------------------\n// Get Notification ID from request URL\nfunction getNotificationId(request){\n    const id = request.url.split(\"/\").pop();\n\n    const notificationId = Number(id);\n    return isNaN(notificationId) ? null : notificationId;\n}\n\n// Invalid notification ID response\nfunction invalidResponse(request){\n    return NextResponse.json(\n        { error: \"Invalid notification ID\" },\n        { status: 400 }\n    )\n}\n\n// CRUD METHODS---------------------------------------\n// FETCHING A SINGLE NOTIFICATION BY ID\nexport async function GET(request) {\n\n    try{\n    // Extracting notification ID from the URL parameters\n    const notificationId = getNotificationId(request);\n    \n    // Validating notification ID\n    if (!notificationId) return invalidResponse();\n    \n    // Fetching the notification by ID from the database\n    const notification = await prisma.notification.findUnique({\n        where: { id: Number(notificationId) },\n    });\n\n    if (!notification) {\n        return NextResponse.json(\n            { error: 'Notification not found' },\n            { status: 404 }\n        );\n    }\n\n    // Returning response \n    return NextResponse.json(notification, { status: 200 });\n    } catch (error) {\n        console.error('Error fetching notification by ID:', error);\n        return NextResponse.json({ error: 'Failed to fetch notification' }, { status: 500 });\n    }\n}\n\n// UPDATE AN EXISTING NOTIFICATION\nexport async function PATCH(request) {\n    try {\n        // Extracting notification ID from the URL parameters\n        const id = getNotificationId(request);\n        console.log('Notification ID to update:', id);\n\n        // Validating notification ID\n        if (!id) return invalidResponse();\n\n        // Extracting updated data from the request body\n        const { message, isRead } = await request.json();\n\n        const dataToUpdate = {};\n        if (message) dataToUpdate.message = message;\n        if (isRead !== undefined) dataToUpdate.isRead = isRead;\n\n        // Updating the notification in the database\n        const updatedNotification = await prisma.notification.update({\n            where: { id: Number(id) },\n            data: dataToUpdate,\n        });\n\n        console.log('Updated notification:', updatedNotification);\n\n        return NextResponse.json(updatedNotification, { status: 200 });\n\n    } catch (error) {\n        console.error('Error updating notification:', error);\n        return NextResponse.json({ error: 'Failed to update notification' }, { status: 500 });\n    }               \n\n}\n\n// DELETE A NOTIFICATION\nexport async function DELETE(request) {\n    try {\n        // Extracting notification ID from the URL parameters\n        const id = getNotificationId(request);\n        console.log('Notification ID to delete:', id);\n\n        // Validating notification ID\n        if (!id) return invalidResponse();\n\n        // Deleting the notification from the database\n        await prisma.notification.delete({\n            where: { id: Number(id) },\n        });\n\n        console.log('Deleted notification with ID:', id);\n\n        return NextResponse.json(\n            { message: 'Notification deleted successfully' },\n            { status: 200 }\n        );\n\n    } catch (error) {\n        console.error('Error deleting notification:', error);\n        return NextResponse.json({ error: 'Failed to delete notification' }, { status: 500 });\n    }               \n\n}"],"names":[],"mappings":";;;;;;;;AAAA;AACA;;;AAGA,uDAAuD;AACvD,uCAAuC;AACvC,SAAS,kBAAkB,OAAO;IAC9B,MAAM,KAAK,QAAQ,GAAG,CAAC,KAAK,CAAC,KAAK,GAAG;IAErC,MAAM,iBAAiB,OAAO;IAC9B,OAAO,MAAM,kBAAkB,OAAO;AAC1C;AAEA,mCAAmC;AACnC,SAAS,gBAAgB,OAAO;IAC5B,OAAO,gJAAY,CAAC,IAAI,CACpB;QAAE,OAAO;IAA0B,GACnC;QAAE,QAAQ;IAAI;AAEtB;AAIO,eAAe,IAAI,OAAO;IAE7B,IAAG;QACH,qDAAqD;QACrD,MAAM,iBAAiB,kBAAkB;QAEzC,6BAA6B;QAC7B,IAAI,CAAC,gBAAgB,OAAO;QAE5B,oDAAoD;QACpD,MAAM,eAAe,MAAM,0HAAM,CAAC,YAAY,CAAC,UAAU,CAAC;YACtD,OAAO;gBAAE,IAAI,OAAO;YAAgB;QACxC;QAEA,IAAI,CAAC,cAAc;YACf,OAAO,gJAAY,CAAC,IAAI,CACpB;gBAAE,OAAO;YAAyB,GAClC;gBAAE,QAAQ;YAAI;QAEtB;QAEA,sBAAsB;QACtB,OAAO,gJAAY,CAAC,IAAI,CAAC,cAAc;YAAE,QAAQ;QAAI;IACrD,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,sCAAsC;QACpD,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAA+B,GAAG;YAAE,QAAQ;QAAI;IACtF;AACJ;AAGO,eAAe,MAAM,OAAO;IAC/B,IAAI;QACA,qDAAqD;QACrD,MAAM,KAAK,kBAAkB;QAC7B,QAAQ,GAAG,CAAC,8BAA8B;QAE1C,6BAA6B;QAC7B,IAAI,CAAC,IAAI,OAAO;QAEhB,gDAAgD;QAChD,MAAM,EAAE,OAAO,EAAE,MAAM,EAAE,GAAG,MAAM,QAAQ,IAAI;QAE9C,MAAM,eAAe,CAAC;QACtB,IAAI,SAAS,aAAa,OAAO,GAAG;QACpC,IAAI,WAAW,WAAW,aAAa,MAAM,GAAG;QAEhD,4CAA4C;QAC5C,MAAM,sBAAsB,MAAM,0HAAM,CAAC,YAAY,CAAC,MAAM,CAAC;YACzD,OAAO;gBAAE,IAAI,OAAO;YAAI;YACxB,MAAM;QACV;QAEA,QAAQ,GAAG,CAAC,yBAAyB;QAErC,OAAO,gJAAY,CAAC,IAAI,CAAC,qBAAqB;YAAE,QAAQ;QAAI;IAEhE,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,gCAAgC;QAC9C,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAgC,GAAG;YAAE,QAAQ;QAAI;IACvF;AAEJ;AAGO,eAAe,OAAO,OAAO;IAChC,IAAI;QACA,qDAAqD;QACrD,MAAM,KAAK,kBAAkB;QAC7B,QAAQ,GAAG,CAAC,8BAA8B;QAE1C,6BAA6B;QAC7B,IAAI,CAAC,IAAI,OAAO;QAEhB,8CAA8C;QAC9C,MAAM,0HAAM,CAAC,YAAY,CAAC,MAAM,CAAC;YAC7B,OAAO;gBAAE,IAAI,OAAO;YAAI;QAC5B;QAEA,QAAQ,GAAG,CAAC,iCAAiC;QAE7C,OAAO,gJAAY,CAAC,IAAI,CACpB;YAAE,SAAS;QAAoC,GAC/C;YAAE,QAAQ;QAAI;IAGtB,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,gCAAgC;QAC9C,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAgC,GAAG;YAAE,QAAQ;QAAI;IACvF;AAEJ"}}]
}